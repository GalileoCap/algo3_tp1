\documentclass[./main.tex]{subfiles}

\begin{document}

\section{Ejercicio 2: Watering Grass}
\label{sec:ej2}

\subsection{Presentación}
\label{sec:ej2-intro}

\paragraph{} El segundo ejercicio presenta el problema \textit{UVa 10382, Watering Grass}\footnote{\url{TODO: URL}}. Que es un problema de combinatoria y minimización, buscando usar la mínima cantidad de aspersores para cubrir completamente un cuarto.

\paragraph{} El cuarto está definido como un rectángulo de largo \(l\) y ancho \(w\), con \(l, w \in \mathbb{N}_0\), y \(n\) aspersores, cada uno cubriendo un círculo de radio \(r_i\) desde la posición \((x_i, \frac{w}{2})\), con \(0 \leq x_i \leq l \in \mathbb{N}_0\). \\
\(l, w, n\), y cada \(r_i, x_i\) son datos que entran por el standard input. Y el resultado se devuelve por el standard output.

\subsection{Algoritmo}
\label{sec:ej2-algo}

\paragraph{} El problema requiere calcular el area del rectángulo que cada aspersor cubre. Pero se puede ver que de cada aspersor sólo nos importa el area rectangular entre los puntos donde interseca con el rectángulo del cuarto, ya que el area cubierta afuera sólo puede ser ocupada por el area rectangular de otro aspersor o dejaría un area sin cubrir por ningún aspersor (ver Figura \ref{fig:two-sprinlers}). \\
\indent Entonces los aspersores con radio \(r_i < \frac{w}{2}\) pueden ser ignorados, ya que no llegan a intersecar con el lado del rectángulo. Y para los aspersores que quedan se los considera no como círculos, sino como su rectángulo subyacente (ver Figura \ref{fig:simple-sprinkle}).

%TODO: Figura rectángulo y círculos

\paragraph{} Partiendo de esa simplificación armamos un algoritmo goloso que primero ordena los aspersores según menor \(x_{il}\). Y luego busca el \(i_0\) de izquierda a derecha que tenga \(x_{i_0l} \leq 0\) y que maximice la distancia entre 0 y \(x_{i_0r}\), para después repetir este paso, pero buscando \(x_{i_1l} \leq x_{i_0r}\), y máxima distancia entre \(x_{i_0r}\) y \(x_{i_1r}\), y así hasta o mo haber más aspersores (caso que no se puede resolver) o haber llenado el cuarto (caso que se encontró la solución optima, ver \textbf{\ref{sec:ej2-dem} Demostración}). \\
En esencia, repitiendo el problema habiendo avanzado hacia cubrir todo el cuarto.

\paragraph{} Como miramos cada aspersor una vez, el algoritmo resuelve el problema en \(\bigO{n}\) pasos, aunque tiene el overhead \(\bigO{n\ log(n)}\) de ordenar los aspersores. Por lo que el problema lo resolvemos en \(\bigO{n\ log(n)}\) pasos. %TODO: Complejidad de cálculos

\subsection{Demostración}
\label{sec:ej2-dem}

%TODO: Demostración

Con esto, planteamos la estructura de cada \textbf{subproblema} y \textbf{decisión golosa} \textit{i} a resolver: \newline

-\textit{Subproblema i}: Hallar la mínima cantidad de aspersores requeridos con el que podamos cubrir el  rectángulo de forma tal que lo hagamos desde el extremo \textit{i} (visto horizontalmente) hasta el final del rectángulo.\newline

-\textit{Decisión golosa i}: De todos los aspersores cuyo límite izquierdo sea menor o igual a \textit{i}, es decir, que empiecen en \textit{i}, que es hasta donde tenemos cubierto, o antes, tomamos el aspersor que sea de máximo cubrimiento, lo cual según definimos será aquel que maximice \textbf{limiteDer(aspersor) - limiteIzq(aspersor)}. \newline

Nos queda, por último, probar la correctitud del algoritmo. Por la forma en la que trabajamos con este tipo de ejercicios, donde el peso se pone en gran parte sobre la demostración, nos propusimos a ver que: \newline

$\bullet$ Si tengo una solución optima puedo modificarla para que use una elección golosa (1). \newline

$\bullet$ Si tengo una secuencia de k decisiones golosas, puedo extenderlas para llegar a una óptima (2).\newline

Lo que queremos con esto, es probar que el algoritmo goloso propuesto produce una solución óptima. \newline \newline 

Comenzamos probando \textbf{(1)}: Queremos ver que \textbf{toda solución óptima para este problema es posible modificarla utilizando elecciones golosas}. Sabemos que existe la óptima, pero queremos aquella que use la golosa. Esto lo podemos demostrar de forma directa. \newline 

Tomamos \(R_{k} = r_{1}, \ldots, r_{k}\) una solución óptima del subproblema \textit{i}, es decir, aquella que minimiza la cantidad de aspersores necesarios para cubrir desde el punto i hasta el final del rectángulo, y un \textit{r} \(\in R_{k}\) tal que \textit{r} representa un intervalo que contiene al \textit{i}. Seguro que existe un \textit{r} de estas características ya que no sería óptima la solución si hubiera algún pedazo del rectángulo no cubierto. \newline

Como también habíamos mencionado, una decisión golosa en ese punto para resolver el subproblema \textit{i}, será tomar el aspersor de mayor extensión que cubra desde \textit{i} o antes al rectángulo.
Si llamamos a ese aspersor \(G_{i}\), y nuestro objetivo es poder introducirlo dentro de la solución óptima, lo que podemos hacer es, partiendo de \(R_{k}\), crear \(R_{k}' = R_{k} \cup G_{i} - r\). \newline 

Sabiendo que el aspersor $G_{i}$ es el de máximo cubrimiento que pasa por \textit{i}, entonces seguro que su cubrimiento sera $\geq$ al cubrimiento de \textit{r}, además de que, considerando que lo que hicimos fue básicamente reemplazar un aspersor por otro, seguiremos usando la mínima cantidad posible y cubriendo todo el rectángulo. Por lo tanto, $ R_{k}'$ es óptima utilizando una elección golosa, y en general, podremos fabricarnos todas las $ R_{k}''$ que deseemos reemplazando en cada subintervalo por la decisión golosa en ese punto, manteniéndonos en una solución óptima.\done\newline\newline

Por último, probemos \textbf{(2)}: queremos ver que \textbf{luego de tomar \textit{k} decisiones golosas $G_{k}$, $\forall k > 0$, se puede extender hacia una solución óptima.} Veámoslo por inducción en \textit{k}. \newline 

P(k): $G_{k}$ se puede extender a una solución óptima $\forall k > 0$. \newline

\textbf{Caso base con k = 0}: Como $G_{0}$ = $\emptyset$, es decir, aún no hemos tomado ninguna decisión golosa, luego si existe una solución óptima, lo voy a poder extender a ella.  \newline

\textbf{Paso inductivo}: queremos ver que si vale P(k), lo hace también P(k+1). 
Nuestra HI es que tomadas \textit{k} decisiones golosas, podemos extendernos hacia una sol. óptima, y queremos saber si vale para k+1 decisiones golosas. \newline

Sabemos que a medida que vamos tomando estas decisiones, el subproblema restante se hace cada vez más chico. Tomadas k elecciones golosas, y con el rectángulo cubierto hasta por ejemplo, \textit{k}, nos queda por resolver el subproblema \textit{k+1}, que encuentre los aspersores mínimos necesarios para cubrir el pedazo de rectángulo que se extiende desde k hasta el final del mismo. \newline

Si \textbf{por HI} sabemos que existe un $\gamma$ tal que \(G_{1} \cup \ldots \cup G_{k} \cup \gamma\) cubren todo el rectángulo, luego $\gamma$ es óptima para el subproblema \textit{k+1}. Pero adicionalmente, por lo demostrado en \textbf{(1)}, toda solución óptima puede modificarse con elecciones golosas. \newline

Por lo tanto, con el mismo cubrimiento y la misma cantidad de aspersores utilizados, tendremos también una solución óptima que utilice la decisión golosa  $G_{k+1}$. Esto quiere decir que habrá un $ \gamma'$ que asegure que \(G_{1} \cup \ldots \cup G_{k} \cup G_{k+1} \cup \gamma'\) cubren todo el rectángulo usando la mínima cantidad de aspersores y por lo tanto, $ \gamma'$ es óptima para el subproblema \textit{k+2}, probando así que $G_{k+1}$ se puede también extender a una solución óptima, \textbf{como queríamos ver}.\done\newline\newline

\end{document}
